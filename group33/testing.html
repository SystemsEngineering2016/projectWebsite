<!DOCTYPE HTML>
<!--
	Alpha by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>Testing</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<!--[if lte IE 8]><script src="assets/js/ie/html5shiv.js"></script><![endif]-->
		<link rel="stylesheet" href="assets/css/main.css" />
		<!--[if lte IE 8]><link rel="stylesheet" href="assets/css/ie8.css" /><![endif]-->
	</head>
	<body>
		<div id="page-wrapper">

			<!-- Header -->
				<header id="header">
					<nav id="nav">
						<ul>
							<li><a href="index.html">Home</a></li>
							<li>
								<a href="#" class="icon fa-angle-down">Requirements</a>
								<ul>
									<li><a href="background.html">Background</a></li>
									<li><a href="requirements.html">Our Requirements</a></li>
								</ul>
							</li>
							<li>
								<a href="#" class="icon fa-angle-down">Research</a>
								<ul>
									<li><a href="research.html">Background Research</a></li>
									<li><a href="researchProject.html">Project Specific Research</a></li>
								</ul>
							</li>
							<li>
								<a href="#" class="icon fa-angle-down">HCI</a>
								<ul>
									<li><a href="prototypes.html">Paper Prototypes</a></li>
									<li><a href="ui.html">Functional Prototype</a></li>
									<li><a href="final.html">Final Delivery</a></li>
								</ul>
							</li>
							<li>
								<a href="#" class="icon fa-angle-down">Design</a>
								<ul>
									<li><a href="development.html">Initial Experiments</a></li>
									<li><a href="diagrams.html">Architectural Diagrams</a></li>
									<li><a href="designPatterns.html">Design Patterns</a></li>
									<li>
										<a href="iterationMain.html">Iterations</a>
									</li>
								</ul>
							</li>
							<li>
								<a href="#" class="icon fa-angle-down">Testing</a>
								<ul>
									<li><a href="testing.html">Testing</a></li>
								</ul>
							</li>
							<li>
								<a href="#" class="icon fa-angle-down">Evaluation</a>
								<ul>
									<li><a href="evaluation.html">Summary</a></li>
									<li><a href="furtherDev.html">Critical Evaulation</a></li>
								</ul>
							</li>
							<li>
								<a href="#" class="icon fa-angle-down">Project Management</a>
								<ul>
									<li><a href="management.html">Project Management</a></li>
									<li><a href="tools.html">Tools</a></li>
									<li><a href="progress.html">Bi-Weekly Reports</a></li>
									<li><a href="client.html">Client Meetings & <br> Final Feedback</a></li>

									<li>
										<a href="#" >Manuals</a>
										<ul>
											<li><a href="SystemManual.pdf">System Manual</a></li>
											<li><a href="UserManual.pdf">User Manual</a></li>
									</ul>
								</li>
								</ul>
							</li>
							<li><a href="https://github.com/SystemsEngineering2016"><i class="fa fa-github" aria-hidden="true"></i></a></li>
					</ul>
	  			</nav>
				</header>

			<!-- Main -->
				<section id="main" class="container">
					<header>
						<h2>Testing</h2>
						<p>We know it is vital to test our project in order to make sure it does what it is intended to do. In order to achieve this, we undertook a number of different approaches. We carried out Unit Testing and Integration on our application in order to confirm that our data models perform as we expect them to. We also wanted to get some general user feedback and so we created a set of test cases and carried out some User Acceptance Testing in order to get an idea of things such as user experience and ease of use. <br><br> Finally, during development we thought it was important to test each development iteration of our application in order to make sure our client was always happy. We therefore demonstrated each iteration to him in person and collected his feedback before moving on to the next development iteration. Each set of feedback, along with the details of each iteration can be seen here:  <br> <br>
							<a class="btn btn-default" href="iteration1.html#feedback1" role="button">Iteration 1 Feedback</a><br>
							<a class="btn btn-default" href="iteration2.html#feedback2" role="button">Iteration 2 Feedback</a><br>
							<a class="btn btn-default" href="iteration3.html#feedback3" role="button">Iteration 3 Feedback</a><br>
							<a class="btn btn-default" href="iteration4.html#feedback4" role="button">Iteration 4 Feedback</a><br>
							<a class="btn btn-default" href="client.html#finalFeedback" role="button">Final Client Feedback</a><br><br>



					 Our <a href = "testing.html#acceptance" >User Acceptance Testing </a>, <a href = "testing.html#unit" > Unit Testing</a> and <a href= "testing.html#integration" >Integration Testing </a>for our final application can be seen below:  </p>

					</header>
					<section id="acceptance">
					<div class="box">
				    <h3> User Acceptence Testing </h3>

				    <table class="table table-hover">
				    <thead>
				      <tr>
				        <th>Test Case</th>
				        <th>Feedback</th>

				      </tr>
				    </thead>
				    <tbody>

				      <tr>
				        <td>User should easily be able to create a new system</td>
				        <td>1) User interface easy to understand and navigation is simple <br> 2) I found it very easy to add a new system </td>

				      </tr>

				      <tr>
				        <td>User should be able to view all systems</td>
				        <td>1) The navbar made it very easy to navigate to the section where I could view all systems <br> 2) I especially liked the search feature, it saved time rather than searching all of the systems manually </td>
				       </tr>
				      <tr>
				        <td>Systems should be able to be edited (name and active status)</td>
				        <td>1) The pencil icon was clear as it is universally used on many applications <br> 2) I liked the hover over text that said what the icon did as it confirmed my thoughts, adding an extra layer to the user experience</td>
				      </tr>

				      <tr>
				        <td>User should be able to create a new version</td>
				        <td>1) The create versions link in the navbar was very clear to me along with the dropdown to choose a system <br> 2) There were multiple routes in order to get to the create versions page, and at first I struggled to realise that they led to the same page</td>
				      </tr>
				      <tr>
				        <td>User should be able to view all versions</td>
				        <td>1) The view versions link on the home page was particularly clear <br> 2) The fact that all system names were a link within the Systems list made it very clear that that took me to more information regarding the versions </td>
				      </tr>
							<tr>
				        <td>User should easily be able to add, edit and delete data points</td>
				        <td>1) The hover text on the name of versions in the version list stated "click to view data points" so it wasn't very clear that this was also the link to add new data points <br> 2) The button to add new data points was very clear </td>
				      </tr>
							<tr>
				        <td>User should be able to create a mapping between two versions</td>
				        <td>1)The shortcut on the homepage made navigation to the mapping page. Once there the instructions were clear on how to map between versions. <br> 2) Having to be redirected to a new page to choose the version for each system to map was an extra click that I felt could have been avoided</td>
				      </tr>

							<tr>
				        <td>User should be able to view and delete mappings</td>
				        <td>1) The view all mappings page was clear with the bin icon clearly being the delete feature <br> 2) At first I didn't see the bin icon for deletion as you had to scroll to the end of the table</td>
				      </tr>

							<tr>
								<td>System names must be unique</td>
								<td>1) I was not allowed to enter two identical system names <br> 2) The error message was clear and let me know to choose a new, unique name</td>
							</tr>
							<tr>
								<td>Version names must be unique</td>
								<td>1) The validation worked for me <br> 2) I tried to enter a version name that was already used an I was not allowed</td>
							</tr>
							<tr>
								<td>A set of data points cannot be added unless a logical name is given</td>
								<td>1) I left the logical name blank and I was not allowed to submit the data points <br> 2) It was not clear to me that the logical name was manditory before submission</td>
							</tr>
							<tr>
								<td>A duplicate mapping cannot be made</td>
								<td>1) I was not allowed to make a duplicate mapping <br> 2) It would be good to not allow a selection of data points that have already been mapped to by disabling the radio buttons</td>
							</tr>

				    </tbody>
				  </table>
				  <br>

					</div>
				</section>
				<section id="unit">

					<div class="box">
				    <h2> Unit Testing </h2>
						<p> In order to test our data models, we first wrote tests which fail to provide the desired functionality before writing tests which pass. This approach is a form of Test-Driven Development (TDD). We used minitests which are a form of unit testing that can be completed on data models in rails. We will complete minitests on the System, Versions, Data Points and Mappings models of our application.</p>

						<h3> 1 Testing System Model </h3>
						<p> Terminal command used to run all the tests on system model: <pre>bin/rails test test/models/system_test.rb</pre>
						<h4>1.1 Testing presence of system name when saving a system</h4>
						<p>This test was implemented without any validations in place for the system model. We aim to ensure that no system is saved without a system name being provided and so used the following test script:</p>
							<pre> require 'test_helper'
	class SystemTest < ActiveSupport::TestCase
	test "should not save system without system_name" do
	  system = System.new
	  assert_not system.save , "Saved the system without a system_name"
	end </pre></p>
		<p> <b>Result:</b> Test failed as expected when no validations are implemented on the system model. F denotes a failure. The corresponding trace is shown under Failure along with the name of the failing test (“should not save system without system name”). The message “saved the system without a system name” is the assertion failure message.</p>
		<p align = "center"> <img src = "images/Tests/image1.png" > </p>
		<p> Now we implement validations on the system name and our test passes without failure. </p>
		<pre>validates_presence_of :System_Name, :message => "must be provided. Please try again. "</pre>
		<p align = "center"> <img src = "images/Tests/image2.png" > </p>

		<h4>1.2 Testing uniqueness of system name when saving a system</h4>
		<p>This test is first implemented without validations. It tests to ensure that a system does not save if the system name provided is not unique. In the test we create a system with a name called “Example System” and then test to see if it saves a duplicate system. </p>
			<pre> def setup
  @system = System.create(System_Name: "Example system")
end

test "System name should be unique" do
  duplicate_system = @system.dup
  assert_not duplicate_system.valid? , "Saved the system without a unique system name"
end </pre></p>
<p> <b>Result:</b> The test fails without validations as expected:</p>
<p align = "center"> <img src = "images/Tests/image3.png" > </p>
<p> Now we implement the validation to ensure system names are unique: The test now passes without failure. </p>
<pre>  validates_uniqueness_of :System_Name, :message => "already exists. Please choose a new name. (System names are not case sensitive).",:case_sensitive => false "</pre>
<p align = "center"> <img src = "images/Tests/image4.png" > </p>


<h3> 2 Testing Versions Model </h3>
<p> Terminal command used to run all the tests on version model: <pre>bin/rails test test/models/version_test.rb</pre>
<h4>2.1 Testing presence of version name when saving a version</h4>
<p>This test was implemented without any validations in place for the version model. We aim to ensure that no version is saved without a version name being provided:</p>
	<pre>  test "should not save version without version name" do
    version = Version.new
    assert_not version.save, "Saved the version without a version name"
  end </pre></p>
<p> <b>Result:</b> Results: The test fails as expected when no validations are provided.</p>
<p align = "center"> <img src = "images/Tests/image5.png" > </p>
<p> Now we implemented the validation to ensure versions are always saved with a version name provided: The test now passes without failure. </p>
<pre>  belongs_to :system
  has_many :table, dependent: :destroy
  validates_presence_of :Version_Name</pre>
<p align = "center"> <img src = "images/Tests/image6.png" > </p>

<h4>2.2 Testing uniqueness of version name when saving a version</h4>
<p>This test is first implemented without validations. It tests to ensure that a version does not save if the version name provided is not unique. In the test we create a version with a name called “Example Version” and then test to see if it saves a duplicate system. The code implementing test for uniqueness was:</p>
<pre> def setup
  @version = Version.create(Version_Name: "Example Version")
end

test "Version name should be unique" do
  duplicate_version = @version.dup
  assert_not duplicate_version.valid? , "Saved the version without a unique version name"
 </pre></p>
<p> <b>Result:</b> The test fails as expected when no validations are provided</p>
<p align = "center"> <img src = "images/Tests/image7.png" > </p>
<p> Now we implemented the validation to ensure versions are only saved if a unique version name is provided: The test now passes without failure. </p>
<pre>   validates_uniqueness_of :Version_Name, :scope => :system_id, :message => "already exists. Please choose a new version name. (Version names are not case sensitive).",:case_sensitive => false</pre>
<p align = "center"> <img src = "images/Tests/image8.png" > </p>





<h3> 3 Testing Data Points (tables) Model </h3>
<p> Terminal command used to run all the tests on tables model: <pre>bin/rails test test/models/table_test.rb</pre>
<h4>3.1 Testing presence of logical name when saving a data point</h4>
<p>This test was implemented without any validations in place for the data point model. We aim to ensure that no data point is saved without a logical name being provided. The code for this test was: </p>
	<pre>  test "should not save data point without logical name" do
    table = Table.new
    assert_not table.save, "Saved the data point without a logical name" </pre></p>
<p> <b>Result:</b> Results: The test fails as expected when no validations are provided.</p>
<p align = "center"> <img src = "images/Tests/image9.png" > </p>
<p> Now we implemented the validation to ensure data points are only saved if a logical name is provided: The test now passes without failure. </p>
<pre>  belongs_to :version
validates_presence_of :Logical_Name, :message => "must be provided. Please try again. "</pre>
<p align = "center"> <img src = "images/Tests/image10.png" > </p>

<h4>3.2 Testing uniqueness of logical name when saving a data point</h4>
<p>This test was implemented without any validations in place for the data point model. We aim to ensure that no data point is saved without a unique logical name being provided. The code implementing this test was:</p>
<pre> def setup
  @table = Table.create(Logical_Name: "Example Data Point")
end

test "Table name should be unique" do
  duplicate_table = @table.dup
  assert_not duplicate_table.valid? , "Saved the data point without a unique logical name"
end
 </pre></p>
<p> <b>Result:</b> The test fails as expected when no validations are provided</p>
<p align = "center"> <img src = "images/Tests/image11.png" > </p>
<p> Now we implemented the validation to ensure versions are only saved if a unique logical name is provided: The test now passes without failure. </p>
<pre>     validates_uniqueness_of :Logical_Name, :scope => :version_id, :message => "already exists. Please choose a new logical name for data point. (Logical names are not case sensitive).",:case_sensitive => false</pre>
<p align = "center"> <img src = "images/Tests/image12.png" > </p>

<h4>3.3 Testing that display width and display height are integers if provided when saving a data point</h4>
<p>This test was implemented without any validations in place for the data point model. We aim to ensure that no data point is saved without an integer value for display width and display height. The test implemented non-integer value examples for display width and display height and checked if a matching error message is obtained once the validation was implemented. The following code was implemented to test if display width and height are integers:</p>
<pre>  test "should have an integer as display width" do
    table = Table.new(Logical_Name: 'test', Display_Width: 'test')
    assert_not table.valid?, "Saved the data point without an integer Display Width"
    assert_equal ["must be an integer. Please try again."], table.errors.messages[:Display_Width]
end
test "should have an integer as display height" do
  table = Table.new(Logical_Name: 'test', Display_Height: 'test')
  assert_not table.valid?, "Saved the data point without an integer Display Height"
  assert_equal ["must be an integer. Please try again."],
 </pre></p>
<p> <b>Result:</b> The test fails twice as expected when no validations are provided.</p>
<p align = "center"> <img src = "images/Tests/image13.png" > </p>
<p> Now we implemented the validation to ensure data points are only saved if display widths and display heights are blank or integers: The tests now pass without failure and the correct error messages are obtained. </p>
<pre>   validates :Display_Width, numericality: { only_integer: true,:allow_blank => true, :message => "must be an integer. Please try again." }
  validates :Display_Height, numericality: { only_integer: true, :allow_blank => true, :message => "must be an integer. Please try again." }</pre>
<p align = "center"> <img src = "images/Tests/image14.png" > </p>



<h3> 4 Testing Mapping Model </h3>
<p> Terminal command used to run all the tests on mapping model: <pre>bin/rails test test/models/map_test.rb</pre>
<h4>4.1 Testing presence of mapfrom and mapto ids when saving a mapping</h4>
<p>This test was implemented without any validations in place for the mapping. We aim to ensure that no mapping is saved without mapfrom and mapto ids of data points being provided. The following test script was used to test for the presence of (x2): </p>
	<pre>   test "should not save mapping without mapfrom id" do
    map = Map.new
    assert_not map.save, "Saved the mapfrom_id without a mapfrom_id"
  end
  test "should not save mapping without mapto id" do
  map = Map.new
  assert_not map.save, "Saved the mapfrom_id without a mapto_id"
end</pre></p>
<p> <b>Result:</b> Results: The test fails as expected when no validations are provided.</p>
<p align = "center"> <img src = "images/Tests/image15.png" > </p>
<p> Now we implemented the validation to ensure mapping are only saved if a valid map from and map to ids exits: The tests now pass without failure. </p>
<pre>    belongs_to :mapfrom, :class_name => 'Table' , optional: true
  belongs_to :mapto, :class_name => 'Table' , optional: true
validate :check_mapfrom
  validate :check_mapto
def check_mapfrom
    if !mapfrom_id.present?
      errors.add(:base, "no datapoint has been selected on the left")
    end
  end

  def check_mapto
    if !mapto_id.present?
      errors.add(:base, "no datapoint has been selected on the right")
    end
  end</pre>
<p align = "center"> <img src = "images/Tests/image16.png" > </p>

<h4>4.2 Testing uniqueness of mapfrom and mapto ids pairs when saving a mapping</h4>
<p>This test was implemented without any validations in place for the mapping. We aim to ensure that the no repeated pair of data points ids are saved.</p>
<pre> def setup
  @map = Map.create(mapfrom_id: "112", mapto_id: "113")
end

test "Mapping should be unique" do
  duplicate_map = @map.dup
  assert_not duplicate_map.valid? , "Saved the mapping without a unique pair of data points"
end
 </pre></p>
<p> <b>Result:</b> The test fails as expected when no validations are provided</p>
<p align = "center"> <img src = "images/Tests/image17.png" > </p>
<p> Now we implemented the validations to ensure mappings are only saved if a unique pair of data points ids are provided: The tests now pass without failure.</p>
<pre>   validate :combination_mappings
  validate :combination_mappings2
  def combination_mappings
    if Map.exists?(:mapfrom_id => mapfrom_id,:mapto_id => mapto_id)
        errors.add(:base,"This mapping already exists.")
      end
  end

  def combination_mappings2
    if Map.exists?(:mapfrom_id => mapto_id,:mapto_id => mapfrom_id)
        errors.add(:base,"This mapping already exists.")
      end
  end</pre>
<p align = "center"> <img src = "images/Tests/image18.png" > </p>

<h4>4.3 Testing to ensure data points from the same version are not mapped</h4>
<p>This test was implemented without any validations in place for the mapping model. We aim to ensure that no mapping between data points from the same version are saved. In order to complete this test we test sample data with that data points being mapped having the same version ids (hence from same version). </p>
<pre>   test "should not save mappings between data points from the same version" do
    map = Map.new(mapfrom_id: '121', mapto_id: '124',fromVersionName:'1', toVersionName:'1')
    assert_not map.valid?, "Saved the mapping between data points from the same version"
end
 </pre></p>
<p> <b>Result:</b> The test fails twice as expected when no validations are provided.</p>
<p align = "center"> <img src = "images/Tests/image19.png" > </p>
<p> Now we implemented the validation to ensure mappings are only saved if they are between data points from different versions: The test now passes
without failure. </p>
<pre>   validate :check_2versions
  def check_2versions
    errors.add(:base, "not allowed to map between datapoints from the same version, please select different versions.") if fromVersionName == </pre>
<p align = "center"> <img src = "images/Tests/image20.png" > </p>


					</div>
				</section>
				<section id="integration">

					<div class="box">
				    <h2> Integration Testing </h2>
						<p>We also completed integration tests to check if the different parts of the application interact as expected. We used this to the test main workflows of our application: creating, editing and deleting of systems, versions, data points and mappings. The integrations tests are implemented on the controller methods of the models.</p>
						<p> These tests were implemented to ensure that the controller code was correct for the create, update and destroy methods and that no errors were obtained during the respective workflows. </p>
						<p>Below is an example of the integration tests implemented on systems. Similar tests to these were implemented on versions, data points and mappings.,/p>
						<p> The tests were completed in terminal with the command: <pre> bin/rails test test/integration/{integration_test_filename}.rb</pre>

						<h3>1 Testing the workflow of creating a new system </h3>
						<pre>require 'test_helper'

class SystemFlowsTest < ActionDispatch::IntegrationTest

  test "can create a system" do
    get "/systems/new"
    assert_response :success

    post "/systems",
      params: { system: { System_Name: "System1" } }
    assert_response :redirect
    follow_redirect!
    assert_response :success
    assert_equal '/systems', path
    assert_equal 'You have successfully created a new system.', flash[:notice]
    assert_select "td", "Systems"
  end
end </pre>

<p>In this workflow test, we first go to system/new page where we can create a new system with system name “System 1”.<br> We then check if it redirects to the correct page as specified by the controller: “/systems”.  <br> We also check if the system is created successfully: assert_response :success <br> This redirected page is where all the systems will be listed and the “assert_select "td", "Systems" ” checks if the systems are listed in the form of a table. <br> “ assert_equal 'You have successfully created a new system.', flash[:notice]” tests to ensure the correct success flash is displayed when creating a new system.</p>
<p>No errors were obtained when testing the workflow of creating a new system as shown below:</p>
<p align = "center"> <img src = "images/Integration/image1.png" > </p>



<h3>2 Testing the workflow of editing an existing system</h3>
<p>For testing editing and deleting of systems, we used sample data created in the system fixtures file: fixtures/systems.yml</p>
<pre>System1:
  System_Name: 1 </pre>
<pre> require 'test_helper'

class SystemsEditFlowsTest < ActionDispatch::IntegrationTest
  # the system visits the system edit page. Using sample data in system fixture file.

  def setup
      @system = systems(:System1)
    end

    test "successful edit" do
      get edit_system_path(@system)
      assert_template 'systems/edit'
     New_System_Name  = "System2"
      patch system_path(@system), params: { system: { System_Name:  New_System_Name} }

      assert_response :redirect
      follow_redirect!
      assert_response :success
      assert_equal '/systems', path
      assert_equal 'You have successfully updated the system name.', flash[:notice]
    end
end</pre>
<p>“Def setup” ensures the test uses sample system data from the system fixture file.</p>
<p> In this workflow test, we first go to system/edit page for a selected system. This page is specific to the system hence we use its id: “get edit_system_path(@system)”</p>
<p>A template is created for the edit page: “assert_template 'systems/edit'”<br>We now edit the system Name: “New_System_Name  = "System2"”f
<br>We now are redirected back to the system index page (/systems) and check if the redirection was successful: assert_response :redirect.<br>We also check if the edit was successful: assert_response :success
<br>Then we check if the correct flash message for the update is displayed: “assert_equal 'You have successfully updated the system name.', flash[:notice]”</p>

<p>No errors were obtained when testing the workflow of editing a system name as shown below:</p>
<p align = "center"> <img src = "images/Integration/image2.png" > </p>




<h3>3 Testing the workflow of deleting a system</h3>
<p>For testing editing and deleting of systems, we used sample data created in the system fixtures file: fixtures/systems.yml</p>
<pre>System1:
  System_Name: 1 </pre>
<pre> require 'test_helper'

class SystemsDeleteFlowsTest < ActionDispatch::IntegrationTest
def setup
      @system = systems(:System1)
    end

    test "successful delete" do
        get "/systems"
        delete system_path(@system)
        assert_redirected_to systems_path

        assert_response :redirect
        follow_redirect!
        assert_response :success
        assert_equal '/systems', path
        assert_equal 'You have successfully deleted the system and all its associated versions, data points and mappings.', flash[:notice]


    end
</pre>
<p>“Def setup” ensures the test uses sample system data from the system fixture file.</p>
<p> In this workflow test, we first go the system index page “/systems” and choose a system to delete. In this case we chose the sample data we created in the system fixtures file:  “delete system_path(@system)”.
</p>
<p>We then check that we are redirected correctly following the deleted system: assert_equal '/systems', path<br>We also check if the system was successfully deleted:  assert_response :success<br>We finally check if the correct flash message is displayed for a successful delete: “        assert_equal 'You have successfully deleted the system and all its associated versions, data points and mappings.', flash[:notice]”</p>

<p>No errors were obtained when testing the workflow of deleting a system as shown below:</p>
<p align = "center"> <img src = "images/Integration/image3.png" > </p>
</div>
</section>
</div>
<!-- Scripts -->
	<script src="assets/js/jquery.min.js"></script>
	<script src="assets/js/jquery.dropotron.min.js"></script>
	<script src="assets/js/jquery.scrollgress.min.js"></script>
	<script src="assets/js/skel.min.js"></script>
	<script src="assets/js/util.js"></script>
	<!--[if lte IE 8]><script src="assets/js/ie/respond.min.js"></script><![endif]-->
	<script src="assets/js/main.js"></script>
</body>
</html>
